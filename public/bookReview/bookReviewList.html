

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>책 리뷰 목록</title>
  <style>
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .top-bar h1 {
      margin: 0;
    }
    .review-item {
      border-bottom: 1px solid #ccc;
      margin-bottom: 15px;
      padding-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <h1>책 리뷰 게시판</h1>
    <a href="./writeBookReview.html">
      <button>리뷰 작성하기</button>
    </a>
  </div>

  <ul id="review-list"></ul>

  <script>
    async function fetchReviews() {
      try {
        const res = await fetch('/book-reviews');
        if (!res.ok) throw new Error('서버 응답 실패');
        const reviews = await res.json();

        const list = document.getElementById('review-list');

        if (reviews.length === 0) {
          list.innerHTML = '<li>등록된 리뷰가 없습니다.</li>';
          return;
        }

        reviews.forEach(review => {
          const li = document.createElement('li');
          li.className = 'review-item';
          li.innerHTML = `
            <strong>${review.title}</strong> (${review.rating}점)<br />
            ISBN: ${review.isbn}<br />
            <small>작성자: ${review.author}</small><br />
            <p>${review.content}</p>
          `;
          list.appendChild(li);
        });
      } catch (err) {
        console.error('리뷰 불러오기 실패:', err);
        document.getElementById('review-list').innerHTML = '<li>리뷰를 불러오는 중 오류가 발생했습니다.</li>';
      }
    }

    fetchReviews();
  </script>
</body>
</html>