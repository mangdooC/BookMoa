<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì±…ëª¨ì•„ - ê²Œì‹œê¸€ ëª©ë¡</title>
</head>
<body>
  <div style="text-align: right; margin: 10px;">
    <a href="write.html">
      <button>ì‘ì„±í•˜ê¸°</button>
    </a>
  </div>
  <h1>ğŸ“š ê²Œì‹œê¸€ ëª©ë¡</h1>
  <ul id="post-list">
    <!-- ê¸€ ëª©ë¡ì´ ì—¬ê¸° ë“¤ì–´ê° -->
  </ul>

  <script>
    async function fetchPosts() {
      const res = await fetch('/posts');
      const posts = await res.json();

      const list = document.getElementById('post-list');

      if (posts.length === 0) {
        list.innerHTML = '<li>ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>';
        return;
      }

      posts.forEach(post => {
        const li = document.createElement('li');
        li.innerHTML = `
          <a href="post.html?id=${post.post_id}">
            <strong>${post.title}</strong>
          </a><br>
          <small>ì‘ì„±ì: ${post.author_nickname ?? 'ì•Œ ìˆ˜ ì—†ìŒ'}</small><br>
          <small>ì‘ì„±ì¼: ${new Date(post.created_at).toLocaleString()}</small><br>
          <p>${post.content}</p>
          <hr>
        `;
        list.appendChild(li);
      });
    }

    fetchPosts();
  </script>
</body>
</html>