<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>책모아 - 게시글 목록</title>
</head>
<body>
  <div style="text-align: right; margin: 10px;">
    <a href="write.html">
      <button>작성하기</button>
    </a>
  </div>
  <h1>📚 게시글 목록</h1>
  <ul id="post-list">
    <!-- 글 목록이 여기 들어감 -->
  </ul>

  <script>
    async function fetchPosts() {
      const res = await fetch('/posts');
      const posts = await res.json();

      const list = document.getElementById('post-list');

      if (posts.length === 0) {
        list.innerHTML = '<li>등록된 게시글이 없습니다.</li>';
        return;
      }

      posts.forEach(post => {
        const li = document.createElement('li');
        li.innerHTML = `
          <a href="post.html?id=${post.post_id}">
            <strong>${post.title}</strong>
          </a><br>
          <small>작성자: ${post.author_nickname ?? '알 수 없음'}</small><br>
          <small>작성일: ${new Date(post.created_at).toLocaleString()}</small><br>
          <p>${post.content}</p>
          <hr>
        `;
        list.appendChild(li);
      });
    }

    fetchPosts();
  </script>
</body>
</html>